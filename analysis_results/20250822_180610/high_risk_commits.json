[
  {
    "commit_hash": "ef80d3fbaccf8c294f43b1768077bcb39130d109",
    "author": "Chris Sellers",
    "date": "Fri Aug 22 18:13:42 2025 +1000",
    "files_changed": [
      {
        "file_path": "nautilus_trader/portfolio/portfolio.pxd",
        "change_type": "Modified",
        "lines_added": 0,
        "lines_removed": 0,
        "language": "Unknown",
        "component": "nautilus_trader",
        "code_patterns": [],
        "potential_issues": []
      },
      {
        "file_path": "nautilus_trader/portfolio/portfolio.pyx",
        "change_type": "Modified",
        "lines_added": 0,
        "lines_removed": 0,
        "language": "Unknown",
        "component": "nautilus_trader",
        "code_patterns": [],
        "potential_issues": []
      }
    ],
    "consistency_issues": [
      {
        "issue_type": "LogicError",
        "description": " AI: Floating-point arithmetic used for financial calculations (Money.as_double()) can cause precision loss and rounding errors in PnL calculations",
        "severity": "Critical",
        "files_affected": [
          "nautilus_trader/portfolio/portfolio.pyx"
        ],
        "suggestion": "AI-detected critical issue - requires immediate review"
      },
      {
        "issue_type": "PotentialPanic",
        "description": " AI: Potential null pointer dereference when returning None instead of Money object from _calculate_realized_pnl method",
        "severity": "Critical",
        "files_affected": [
          "nautilus_trader/portfolio/portfolio.pyx"
        ],
        "suggestion": "AI-detected critical issue - requires immediate review"
      },
      {
        "issue_type": "LogicError",
        "description": " AI: Currency conversion with zero exchange rate returns None instead of handling the error case properly, potentially breaking downstream calculations",
        "severity": "High",
        "files_affected": [
          "nautilus_trader/portfolio/portfolio.pyx"
        ],
        "suggestion": "AI-detected critical issue - requires immediate review"
      }
    ],
    "patterns_detected": [
      {
        "pattern_name": " AI: floating-point-financial-calculations",
        "confidence": 0.9,
        "description": "Using floating-point arithmetic for monetary calculations can lead to precision errors, rounding issues, and financial discrepancies",
        "files": [
          "AI analysis"
        ]
      },
      {
        "pattern_name": " AI: inconsistent-return-types",
        "confidence": 0.8,
        "description": "Returning None instead of the expected Money type breaks type consistency and can cause downstream crashes",
        "files": [
          "AI analysis"
        ]
      }
    ],
    "risk_score": 100
  }
]